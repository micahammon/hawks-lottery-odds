<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hawks Lottery Odds</title>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
<main class="page">
    <header class="hero">
        <h1>Atlanta Pick Odds (MIL/NO Better-Of)</h1>
        <p>
            Monte Carlo tool focused only on ATL receiving the more favorable pick between Milwaukee and New Orleans.
        </p>
    </header>

    <section class="panel logic-panel">
        <h2>Best-Of Logic</h2>
        <p class="logic-copy">
            ATL gets the better outcome from MIL and NO each simulated lottery. Top-4 odds cannot be added directly
            because both teams can land in overlapping top-4 scenarios.
        </p>
        <pre class="logic-diagram">Sim one lottery -> MIL pick = X, NO pick = Y -> ATL pick = min(X, Y)</pre>
    </section>

    <section class="panel">
        <div class="panel-head">
            <h2>Current Lottery Data</h2>
            <button id="refresh-data-btn" type="button">Refresh data</button>
        </div>
        <p><strong>Last updated (UTC source):</strong> <span id="updated-at">Loading...</span></p>
        <p class="meta-note">Data updates automatically every 6 hours via GitHub Actions.</p>
        <p id="team-check" class="team-check" hidden></p>
        <ol id="top14-list" class="top14"></ol>
        <pre id="load-error" class="error" hidden></pre>
    </section>

    <section class="panel">
        <h2>Simulation Controls</h2>
        <div class="controls">
            <label for="sims-input">Simulations</label>
            <input id="sims-input" type="number" min="1" max="2000000" step="1000" value="1000000">

            <label for="seed-input">Seed (optional)</label>
            <input id="seed-input" type="number" min="0" max="4294967295" placeholder="random">
        </div>
        <button id="run-btn" type="button" disabled>Run simulation</button>
    </section>

    <section class="panel">
        <h2>Status</h2>
        <div class="status-line">
            <span id="status-spinner" class="spinner" hidden></span>
            <span id="status-text">Idle.</span>
        </div>
    </section>

    <section id="results" class="panel" hidden>
        <h2>Results</h2>
        <div class="summary-grid">
            <div><strong>ATL Top-4</strong><br><span id="summary-top4"></span></div>
            <div><strong>ATL Expected Pick</strong><br><span id="summary-expected"></span></div>
            <div><strong>ATL Worst-Case Pick</strong><br><span id="summary-worst"></span></div>
            <div><strong>Seed Used</strong><br><span id="summary-seed"></span></div>
            <div><strong>Simulations</strong><br><span id="summary-sims"></span></div>
        </div>

        <div id="pick-chart" class="bar-chart" aria-label="ATL pick probability chart"></div>

        <div class="table-wrap">
            <table>
                <thead>
                <tr>
                    <th>ATL Pick</th>
                    <th class="num-col">Count</th>
                    <th class="num-col">Probability</th>
                </tr>
                </thead>
                <tbody id="distribution-body"></tbody>
            </table>
        </div>
    </section>
</main>
<script src="./app.js" defer></script>
</body>
</html>
